<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>G√©n√©rateur d'ic√¥nes PWA - DeepMemo</title>
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      max-width: 600px;
      margin: 50px auto;
      padding: 20px;
      background: #0a0a0a;
      color: #e0e0e0;
    }
    h1 { color: #6bb0ff; }
    button {
      background: #3d8eff;
      color: white;
      border: none;
      padding: 12px 24px;
      font-size: 16px;
      border-radius: 6px;
      cursor: pointer;
      margin: 10px 10px 10px 0;
    }
    button:hover { background: #6bb0ff; }
    .preview {
      display: flex;
      gap: 20px;
      margin: 20px 0;
      align-items: center;
    }
    canvas {
      border: 2px solid #333;
      border-radius: 8px;
    }
    .status {
      margin-top: 20px;
      padding: 10px;
      background: #1a1a1a;
      border-radius: 6px;
      font-family: monospace;
    }
    .success { color: #4ade80; }
    .info { color: #6bb0ff; }
  </style>
</head>
<body>
  <h1>üé® G√©n√©rateur d'ic√¥nes PWA</h1>
  <p>G√©n√®re les ic√¥nes 192x192 et 512x512 pour l'installation PWA de DeepMemo.</p>

  <button onclick="generateIcons()">‚ú® G√©n√©rer les ic√¥nes</button>

  <div class="preview" id="preview"></div>
  <div class="status" id="status">Cliquez sur "G√©n√©rer" pour cr√©er les ic√¥nes...</div>

  <script>
    const svgContent = `
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
  <defs>
    <radialGradient id="starGradient" cx="50%" cy="50%" r="50%">
      <stop offset="0%" style="stop-color:#6bb0ff;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#3d8eff;stop-opacity:1" />
    </radialGradient>
  </defs>
  <!-- Fond noir pour PWA -->
  <rect width="100" height="100" fill="#0a0a0a"/>
  <!-- √âtoile √† 5 branches -->
  <path d="M 50 10 L 61 38 L 90 38 L 67 55 L 76 85 L 50 65 L 24 85 L 33 55 L 10 38 L 39 38 Z"
        fill="url(#starGradient)"
        stroke="#3d8eff"
        stroke-width="2"/>
  <!-- Effet de brillance -->
  <circle cx="40" cy="25" r="8" fill="white" opacity="0.6"/>
  <circle cx="42" cy="27" r="4" fill="white" opacity="0.8"/>
</svg>`;

    function svgToCanvas(svgString, size) {
      return new Promise((resolve) => {
        const canvas = document.createElement('canvas');
        canvas.width = size;
        canvas.height = size;
        const ctx = canvas.getContext('2d');

        const img = new Image();
        const blob = new Blob([svgString], { type: 'image/svg+xml' });
        const url = URL.createObjectURL(blob);

        img.onload = () => {
          ctx.drawImage(img, 0, 0, size, size);
          URL.revokeObjectURL(url);
          resolve(canvas);
        };

        img.src = url;
      });
    }

    function downloadCanvas(canvas, filename) {
      canvas.toBlob((blob) => {
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = filename;
        a.click();
        URL.revokeObjectURL(url);
      }, 'image/png');
    }

    async function generateIcons() {
      const status = document.getElementById('status');
      const preview = document.getElementById('preview');

      status.innerHTML = '<span class="info">‚è≥ G√©n√©ration en cours...</span>';
      preview.innerHTML = '';

      try {
        // G√©n√©rer icon-192.png
        const canvas192 = await svgToCanvas(svgContent, 192);
        preview.appendChild(canvas192);

        // G√©n√©rer icon-512.png
        const canvas512 = await svgToCanvas(svgContent, 512);
        preview.appendChild(canvas512);

        status.innerHTML = `
          <span class="success">‚úÖ Ic√¥nes g√©n√©r√©es avec succ√®s !</span><br><br>
          <span class="info">Instructions :</span><br>
          1. Clic droit sur chaque image ci-dessus ‚Üí "Enregistrer l'image sous..."<br>
          2. Sauvegarder dans le dossier <code>icons/</code> :<br>
             - La petite : <code>icon-192.png</code><br>
             - La grande : <code>icon-512.png</code><br>
          3. Ou utiliser les boutons ci-dessous pour t√©l√©charger directement
        `;

        // Ajouter boutons de t√©l√©chargement
        const btnDiv = document.createElement('div');
        btnDiv.style.marginTop = '20px';

        const btn192 = document.createElement('button');
        btn192.textContent = 'üíæ T√©l√©charger icon-192.png';
        btn192.onclick = () => downloadCanvas(canvas192, 'icon-192.png');

        const btn512 = document.createElement('button');
        btn512.textContent = 'üíæ T√©l√©charger icon-512.png';
        btn512.onclick = () => downloadCanvas(canvas512, 'icon-512.png');

        btnDiv.appendChild(btn192);
        btnDiv.appendChild(btn512);
        document.body.appendChild(btnDiv);

      } catch (err) {
        status.innerHTML = `<span style="color: #ef4444;">‚ùå Erreur : ${err.message}</span>`;
      }
    }
  </script>
</body>
</html>
